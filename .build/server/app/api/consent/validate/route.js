"use strict";(()=>{var e={};e.id=449,e.ids=[449],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},44664:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v});var r={};s.r(r),s.d(r,{POST:()=>c});var n=s(49303),a=s(88716),o=s(60670),i=s(87070),u=s(30467),d=s(14749);async function c(e){try{let{userId:t,operation:s,additionalContext:r}=await e.json();if(!t||!s)return i.NextResponse.json({success:!1,error:"Missing required fields"},{status:400});if(!["analysis","export","sharing","research"].includes(s))return i.NextResponse.json({success:!1,error:"Invalid operation type"},{status:400});let n=await u.PA.validateConsentForOperation(t,s);if(await d.Ps.logEvent({userId:t,eventType:"data_access",resource:"user_profile",action:"read",ipAddress:e.headers.get("x-forwarded-for")||"unknown",userAgent:e.headers.get("user-agent")||void 0,endpoint:"/api/consent/validate",method:"POST",dataAccessed:{operation:s,consentValid:n,additionalContext:r},success:!0,riskLevel:n?"low":"medium"}),!n)return i.NextResponse.json({success:!1,error:"Insufficient consent for operation",data:{operation:s,consentRequired:!0,message:`User consent required for ${s} operation`}},{status:403});return i.NextResponse.json({success:!0,data:{operation:s,consentValid:!0,message:"User has valid consent for operation"}})}catch(e){return console.error("Consent validation failed:",e),i.NextResponse.json({success:!1,error:"Failed to validate consent"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/consent/validate/route",pathname:"/api/consent/validate",filename:"route",bundlePath:"app/api/consent/validate/route"},resolvedPagePath:"/home/ubuntu/labinsight-ai-complete/app/api/consent/validate/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:f}=p,g="/api/consent/validate/route";function h(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972,753],()=>s(44664));module.exports=r})();